{%- liquid
  assign current_variant = product.selected_or_first_available_variant

  unless thumbnail_position
    assign thumbnail_position = 'beside'
  endunless

  assign product_zoom_size = '1800x1800'
  assign product_image_size = '620x'

  case image_container_width
    when 'small'
      assign product_image_width = 'medium-up--two-fifths'
      assign product_description_width = 'medium-up--three-fifths'
      assign product_image_size = '480x'
    when 'medium'
      assign product_image_width = 'medium-up--one-half'
      assign product_description_width = 'medium-up--one-half'
      assign product_image_size = '620x'
    when 'large'
      assign product_image_width = 'medium-up--three-fifths'
      assign product_description_width = 'medium-up--two-fifths'
      assign product_image_size = '740x'
  endcase

  assign product_img_structure = product.featured_media | img_url: '1x1' | replace: '_1x1.', '_{width}x.'

  for variant in product.variants
    if current_variant.price > variant.price and variant.available
      assign current_variant = variant
    endif
  endfor

  assign gender = ''
  if product.tags contains 'men'
    assign gender = 'men'
  elsif product.tags contains 'women'
    assign gender = 'women'
  endif
-%}

{%- liquid
  assign connect_to_sizechart = false

  for block in section.blocks
    if block.type == 'size_chart'
      assign sizechart_index = forloop.index0
      assign next_block_index = sizechart_index | plus: 1
      assign variant_block = section.blocks[next_block_index]

      if variant_block.type == 'variant_picker' and variant_block.settings.picker_type == 'button' and product.has_only_default_variant == false
        for option in product.options_with_values
          assign size_trigger = 'products.general.size_trigger' | t | downcase
          assign downcased_option = option.name | downcase

          if downcased_option contains size_trigger
            assign connect_to_sizechart = true
          endif
        endfor
      endif

    endif
  endfor
-%}

<div id="ProductSection-{{ section_id }}-{{ product.id }}"
  class="product-section"
  data-section-id="{{ section_id }}"
  data-product-id="{{ product.id }}"
  data-section-type="product"
  data-template-version="v1"
  data-product-handle="{{ product.handle }}"
  data-product-title="{{ product.title | escape }}"
  data-product-url="{{ product.url | within: collection }}"
  data-aspect-ratio="{{ 100 | divided_by: product.featured_media.aspect_ratio }}"
  data-img-url="{{ product_img_structure }}"
  {% unless isModal %}
    data-history="true"
  {% endunless %}
  data-modal="{{ isModal }}">

  {%- render 'product-template-variables', product: product, current_variant: current_variant -%}

  <div class="page-content page-content--product">
    <div class="page-width">

      <div class="grid{% unless image_position == 'left' %} grid--product-images-right{% endunless %}{% if mobile_layout == 'partial' %} grid--product-images--partial{% endif %}">
        {%- if image_position == 'left' -%}
          <div class="grid__item {{ product_image_width }} product-single__sticky">
            <div class="wishlist__btn--wrapper wishlist--product-image-overlay">
              <div class="wishlist-king__btn--control">
                <div class="button__wrapper">
                  <button
                    class="wk-button-trigger wk--button btn btn--secondary btn--full"
                    style="display: flex; justify-content: center; gap: 1em;"
                    data-product-id="{{ product.id }}"
                    data-variant-id="{{ current_variant.id }}"
                    data-product-handle="{{ product.handle }}"
                    data-in-wishlist="false"
                  >
                    <span class="wk-icon">
                      <svg viewBox="0 0 64 64">
                        <path d="M32.012,59.616c-1.119-.521-2.365-1.141-3.707-1.859a79.264,79.264,0,0,1-11.694-7.614C6.316,42,.266,32.6.254,22.076,0.244,12.358,7.871,4.506,17.232,4.5a16.661,16.661,0,0,1,11.891,4.99l2.837,2.889,2.827-2.9a16.639,16.639,0,0,1,11.874-5.02h0c9.368-.01,17.008,7.815,17.021,17.539,0.015,10.533-6.022,19.96-16.312,28.128a79.314,79.314,0,0,1-11.661,7.63C34.369,58.472,33.127,59.094,32.012,59.616Z"></path>
                      </svg>
                    </span>
                    <span class="wk-text">{{ "products.product.add_to_wishlist" | t }}</span>
                  </button>
                </div>
              </div>
            </div>
            {%- render 'product-images',
              section_id: section_id,
              product: product,
              isModal: isModal,
              image_position: image_position,
              product_zoom_enable: product_zoom_enable,
              product_zoom_size: product_zoom_size,
              product_image_size: product_image_size,
              thumbnail_arrows: thumbnail_arrows,
              thumbnail_height: thumbnail_height,
              thumbnail_position: thumbnail_position,
              video_looping: video_looping,
              video_style: video_style
            -%}
          </div>
        {%- endif -%}

        <div class="grid__item {{ product_description_width }} sticky-position">

          <div class="product-single__meta">
            {% capture product_header %}
              <div class="product-block product-block--header small--text-left">
                {% comment %}
                {%- if settings.show_breadcrumbs and isModal != true -%}
                  {%- render 'breadcrumbs' -%}
                {%- endif -%}
                {% endcomment %}
  
                {%- if settings.vendor_enable -%}
                  {%- assign vendor_handle = product.vendor | replace: '.', '-' | handleize -%}
                  {%- assign vendor_title = product.vendor -%}

                  {%- capture vendor_url -%}shop-{{ vendor_handle }}-for-{{ gender }}{%- endcapture -%}

                  {%- liquid
                     assign current_season = ""
                     for season in shop.metaobjects.current_season.values
                       assign current_season =  season.product_tag
                     endfor
                     assign product_tag = ""
                     for tag in product.tags
                       if tag contains 'label'
                         assign product_tag = tag | replace: 'label-'
                       endif
                     
                       if tag contains current_season
                         assign product_tag = 'products.product.tag_new_arrival' | t
                         break
                       endif
                     endfor
                  %}
                  {%- unless product_tag == "" -%}
                    <p class="product-single__tag">{{ product_tag }}</p>
                  {%- endunless -%}
                  <div class="product-single__vendor" data-url="{{ vendor_url }}">
                    {%- render 'vendor', product: product, gender: gender -%}
                  </div>
                {%- endif -%}
  
                {%- if isModal -%}
                  <p class="grid-product__title grid-product__title--heading hc-font">
                    {{ product.title }}
                  </p>
                {%- else -%}
                  <h1 class="grid-product__title grid-product__title--heading hc-font">
                    {%- unless product.empty? -%}
                      {{ product.title }}
                    {%- else -%}
                      {{ 'home_page.onboarding.product_title' | t }}
                    {%- endunless -%}
                  </h1>
                {%- endif -%}
  
                {%- if sku_enable -%}
                  <p data-sku class="product-single__sku">
                    {%- if current_variant.sku -%}
                      {{ current_variant.sku }}
                    {%- endif -%}
                  </p>
                {%- endif -%}
              </div>
            {% endcapture %}
            {{ product_header }}

            <div data-product-blocks>
              {%- capture form_id -%}AddToCartForm-{{ section_id }}-{{ product.id }}{%- endcapture -%}
              {%- for block in blocks -%}
                {%- case block.type -%}
                  {%- when '@app' -%}
                    {% render block %}
                  {%- when 'separator' -%}
                    <div class="product-block" {{ block.shopify_attributes }}><hr></div>
                  {%- when 'text' -%}
                    <div class="product-block" {{ block.shopify_attributes }}>
                      {{ block.settings.text }}
                    </div>
                  {%- when 'tab' -%}
                    {% assign tab_id = block.id | append: product.id %}
                    {% capture tab_content %}
                      {{ block.settings.content }}
                      {{ block.settings.content_right }}
                      {{ block.settings.page.content }}
                    {% endcapture %}
                    {% unless tab_content == blank and block.settings.title == blank %}
                      {% assign item_info = block.settings.title | downcase %}
                      {% if block.settings.remove_bottom_margin == true %}
                        {% style %}
                          #product-block--tab__{{ block.id }} {
                            margin-bottom: 0;
                          }
                        {% endstyle %}
                      {% endif %}
                      <div id="product-block--tab__{{ block.id }}" class="product-block product-block--tab {% if item_info == 'item info' or item_info == 'product details' %} product-block__item-info {% endif %}" {{ block.shopify_attributes }}>
                        {%- render 'tab', id: tab_id, title: block.settings.title, content: tab_content, border_top: block.settings.top_border -%}
                      </div>
                    {% endunless %}
                  {%- when 'contact' -%}
                    <div class="product-block product-block--tab" data-block-type="contact" {{ block.shopify_attributes }}>
                      {% assign tab_id = block.id | append: product.id %}
                      {%- render 'tab-contact', id: tab_id, block: block -%}
                    </div>
                  {%- when 'description' -%}
                
                     <div class="product-block__description product-block{% if block.settings.is_tab %} product-block--tab{% endif %}" {{ block.shopify_attributes }}>
                      {%- assign id = block.id | append: product.id -%}
                      {{ product_header }}
                      {%- render 'product-description', id: id, product: product, is_tab: block.settings.is_tab -%}
                    </div>
                  {%- when 'price' -%}
                    <div class="product-block product-block--price small--text-left" {{ block.shopify_attributes }}>
                      {%- assign hide_sale_price = true -%}
                      {%- if product.compare_at_price_max > product.price -%}
                        {%- if current_variant.compare_at_price > current_variant.price -%}
                          {%- assign hide_sale_price = false -%}
                        {%- endif -%}
                        <span
                          data-a11y-price
                          class="visually-hidden"
                          aria-hidden="{{ hide_sale_price }}">
                            {{ 'products.general.regular_price' | t }}
                        </span>
                        <span data-product-price-wrap class="{% if hide_sale_price %} hide{% endif %}">
                          <span data-compare-price class="product__price product__price--compare">
                            {%- if current_variant.compare_at_price > current_variant.price -%}
                              {{ current_variant.compare_at_price | money }}
                            {%- endif -%}
                          </span>
                        </span>
                        <span data-compare-price-a11y class="visually-hidden">{{ 'products.general.sale_price' | t }}</span>
                      {%- else -%}
                        <span data-a11y-price class="visually-hidden">{{ 'products.general.regular_price' | t }}</span>
                      {%- endif -%}
                      
                      {%- if settings.product_save_amount -%}
                        {%- if settings.product_save_type == 'dollar' -%}
                          {%- capture saved_amount -%}{{ current_variant.compare_at_price | minus: current_variant.price | money }}{%- endcapture -%}
                        {%- else -%}
                          {%- capture saved_amount -%}{{ current_variant.compare_at_price | minus: current_variant.price | times: 100.0 | divided_by: current_variant.compare_at_price | round }}%{%- endcapture -%}
                        {%- endif -%}
                        
                        {% assign save_parcent = product.compare_at_price | minus: product.price | times: 100.0 | divided_by: product.compare_at_price | round %}

                        {%- unless settings.product_save_type == 'dollar' -%}
                          {%- unless save_parcent < 10 -%}
                            <span data-save-price class="product__price-savings{% if hide_sale_price %} hide{% endif %}">
                              <span class="product__saving--amount">
                                -{{ saved_amount }}
                              </span>
                            </span>
                          {%- endunless -%}
                        {%- else -%}
                          <span data-save-price class="product__price-savings{% if hide_sale_price %} hide{% endif %}">
                            <span class="product__saving--amount">
                              -{{ saved_amount }}
                            </span>
                          </span>
                        {%- endunless -%}
                      {%- endif -%}
                      
                      <span data-product-price
                        class="product__price{% if current_variant.compare_at_price > current_variant.price %} on-sale{% endif %}">
                        {%- unless product.empty? -%}
                          {{ current_variant.price | money }}
                        {%- else -%}
                          {{ 1999 | money }}
                        {%- endunless -%}
                      </span>

                      <div
                        data-unit-price-wrapper
                        class="product__unit-price product__unit-price--spacing {% unless current_variant.unit_price_measurement %} hide{% endunless %}">
                        {%- capture unit_price_base_unit -%}
                          <span data-unit-base>
                            {%- if current_variant.unit_price_measurement -%}
                              {%- if current_variant.unit_price_measurement.reference_value != 1 -%}
                                {{ current_variant.unit_price_measurement.reference_value }}
                              {%- endif -%}
                              {{ current_variant.unit_price_measurement.reference_unit }}
                            {%- endif -%}
                          </span>
                        {%- endcapture -%}

                        <span data-unit-price>{{ current_variant.unit_price | money }}</span>/{{ unit_price_base_unit }}
                      </div>

                      {%- if shop.taxes_included or shop.shipping_policy.body != blank -%}
                        <div class="product__policies rte small--text-left">
                          {%- if shop.taxes_included -%}
                            {{ 'products.product.include_taxes' | t }}
                          {%- endif -%}
                          {%- if shop.shipping_policy.body != blank -%}
                            {{ 'products.product.shipping_policy_html' | t: link: shop.shipping_policy.url }}
                          {%- endif -%}
                        </div>
                      {%- endif -%}
                    </div>
                  {%- when 'quantity_selector' -%}
                    <div class="product-block" {{ block.shopify_attributes }}>
                      <div class="product__quantity">
                        {% assign qty_id = section_id | append: product.id %}
                        <label for="Quantity-{{ qty_id }}">{{ 'products.product.quantity' | t }}</label>
                        {%- render 'quantity-input', form_id: form_id, id: qty_id, qty: 1, min: 1 -%}
                      </div>
                    </div>
                  {%- when 'size_chart' -%}
                    {% if connect_to_sizechart == false %}
                      {%- capture size_chart_title -%}
                        {{ 'products.general.size_chart' | t }}<svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-size-chart" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-width:2px}</style></defs><path class="a" d="M22.39 33.53c-7.46 0-13.5-3.9-13.5-8.72s6-8.72 13.5-8.72 13.5 3.9 13.5 8.72a12 12 0 0 1-.22 1.73"/><ellipse cx="22.39" cy="24.81" rx="3.28" ry="2.12"/><path class="a" d="M8.89 24.81V38.5c0 7.9 6.4 9.41 14.3 9.41h31.92V33.53H22.39M46.78 33.53v7.44M38.65 33.53v7.44M30.52 33.53v7.44M22.39 33.53v7.44"/></svg>
                      {%- endcapture -%}

                      <div class="size-chart__standalone" {{ block.shopify_attributes }}>
                        {%- render
                          'tool-tip-trigger',
                          title: size_chart_title,
                          content: block.settings.size_chart.content,
                          context: 'size-chart'
                        -%}
                        {% style %}
                          tool-tip-trigger {
                            text-transform: uppercase;
                          }
                        {% endstyle %}
                      </div>
                    {% endif %}
                  {%- when 'variant_picker' -%}
                    <div class="product-block" {% if block.settings.product_dynamic_variants_enable %}data-dynamic-variants-enabled{% endif %} {{ block.shopify_attributes }}>
                      {%- unless product.has_only_default_variant -%}
                        {%- for option in product.options_with_values -%}
                          {%- liquid
                            if block.settings.color_swatches
                              assign is_color = false
                              assign color_option_index = 0
                              assign swatch_trigger = 'products.general.color_swatch_trigger' | t | downcase
                              assign color_option_index = forloop.index0
                              assign downcased_option = option.name | downcase
                              if downcased_option contains swatch_trigger
                                assign is_color = true
                              elsif swatch_trigger == 'color' and downcased_option contains 'colour'
                                assign is_color = true
                              endif
                            endif
                          -%}

                          {%- if block.settings.picker_type == 'button' -%}
                            {%- render 'variant-button',
                              block: block,
                              product: product,
                              form_id: form_id,
                              section_id: section_id,
                              option: option,
                              forloop: forloop,
                              variant_labels: block.settings.variant_labels,
                              is_color: is_color,
                              color_option_index: color_option_index,
                              connect_to_sizechart: connect_to_sizechart,
                              sizechart_index: sizechart_index
                            -%}
                          {%- else -%}
                            {%- render 'variant-dropdown',
                              product: product,
                              form_id: form_id,
                              section_id: section_id,
                              option: option,
                              forloop: forloop,
                              variant_labels: block.settings.variant_labels,
                              current_variant: current_variant
                            -%}
                          {%- endif -%}
                        {%- endfor -%}
                      {%- endunless -%}
                    </div>
                  {%- when 'buy_buttons' -%}
                    <div class="product-block" data-block-type="buy_buttons" {{ block.shopify_attributes }}>
                      {%- unless product.empty? -%}
                        <div class="add-to-cart-with-wishlist">
                          {%- render 'product-form',
                            form_id: form_id,
                            product: product,
                            show_dynamic_checkout: block.settings.show_dynamic_checkout,
                            current_variant: current_variant
                          -%}

                          {%- unless wishlist == '' -%}
                            <div class="wishlist__btn--wrapper">
                              <div class="wishlist-king__btn--control">
                                <div class="button__wrapper">
                                  <button
                                    class="wk-button-trigger wk--button btn btn--secondary btn--full"
                                    style="display: flex; justify-content: center; gap: 1em;"
                                    data-product-id="{{ product.id }}"
                                    data-variant-id="{{ current_variant.id }}"
                                    data-product-handle="{{ product.handle }}"
                                    data-in-wishlist="false"
                                  >
                                    <span class="wk-icon">
                                      <svg viewBox="0 0 64 64">
                                        <path d="M32.012,59.616c-1.119-.521-2.365-1.141-3.707-1.859a79.264,79.264,0,0,1-11.694-7.614C6.316,42,.266,32.6.254,22.076,0.244,12.358,7.871,4.506,17.232,4.5a16.661,16.661,0,0,1,11.891,4.99l2.837,2.889,2.827-2.9a16.639,16.639,0,0,1,11.874-5.02h0c9.368-.01,17.008,7.815,17.021,17.539,0.015,10.533-6.022,19.96-16.312,28.128a79.314,79.314,0,0,1-11.661,7.63C34.369,58.472,33.127,59.094,32.012,59.616Z"></path>
                                      </svg>
                                    </span>
                                    <span class="wk-text">{{ "products.product.add_to_wishlist" | t }}</span>
                                  </button>
                                </div>
                              </div>
                            </div>
                          {%- endunless -%}
                        </div>
                      {%- endunless -%}

                      {%- if block.settings.surface_pickup_enable -%}
                        <div data-store-availability-holder
                          data-product-name="{{ product.title | escape }}"
                          data-base-url="{{ shop.url }}{{ routes.root_url }}"
                          ></div>
                      {%- endif -%}
                    </div>
                  {%- when 'sales_point' -%}
                    {%- unless block.settings.text == blank -%}
                      <div class="product-block product-block--sales-point" {{ block.shopify_attributes }}>
                        <ul class="sales-points">
                          <li class="sales-point">
                            <span class="icon-and-text">
                              {% case block.settings.icon %}
                                {% when 'checkmark' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-circle-checkmark" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-width:2px}</style></defs><path class="a" d="M52.68 24.48A22 22 0 1 1 47 15.93M21 32l8.5 8.5L57 13"/></svg>
                                {% when 'gift' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-gift" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-width:2px}</style></defs><path class="a" d="M9 20.23h46v8.68H9zM13.34 28.91h36.89v24.3H13.34zM27.82 20.66v32.98M35.91 20.88v32.98M20.52 11.43a3.73 3.73 0 0 0-.74 2.87 4.57 4.57 0 0 0 .8 2.27C22 18.09 25.15 20 32 20.23a12 12 0 0 0-2.43-7 7.52 7.52 0 0 0-5.66-3.12 4 4 0 0 0-3.39 1.32z"/><path class="a" d="M43.37 11.43a3.73 3.73 0 0 1 .74 2.87 4.48 4.48 0 0 1-.8 2.27c-1.42 1.52-4.57 3.41-11.42 3.66a12.08 12.08 0 0 1 2.43-7A7.56 7.56 0 0 1 40 10.14a4 4 0 0 1 3.37 1.29z"/></svg>
                                {% when 'globe' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-globe" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-width:2px}</style></defs><circle class="a" cx="32" cy="32" r="22"/><path class="a" d="M13 21h38M10 32h44M13 43h38M32 10c-12 8-12 37 0 44M32 10c12 8 12 37 0 44"/></svg>
                                {% when 'heart' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-heart" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-width:2px}</style></defs><path class="a" d="M51.27 15.05a13 13 0 0 0-18.44 0l-.83.83-.83-.83a13 13 0 0 0-18.44 18.44l.83.83L32 52.77l18.44-18.45.83-.83a13 13 0 0 0 0-18.44z"/></svg>
                                {% when 'leaf' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-leaf" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-miterlimit:10;stroke-width:2px}</style></defs><path class="a" d="M52 11L13 50M35 13v15h16"/><path class="a" d="M52 11c6 24-16.72 47.29-33 32C7 22 29 10 52 11z"/></svg>
                                {% when 'lock' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-lock" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-width:2px}</style></defs><path class="a" d="M19.45 23.6v-3.2c0-7 5.89-11.75 12.55-11.75 7.21 0 12.55 5.49 12.55 11.75v3.2M10 23.6h44v31.75H10zM32 37.47v7.47"/><circle class="a" cx="32" cy="35.87" r="1.6"/></svg>
                                {% when 'package' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-package" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-width:2px}</style></defs><path class="a" d="M32 54.52L10 41.95v-19.9L32 9.48l22 12.57v19.9L32 54.52z"/><path class="a" d="M32 54.52v-19.9l22-12.57M32 34.62L10 22.05M41.7 15.02L21 28.33v8.38"/></svg>
                                {% when 'phone' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-phone" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-width:2px}</style></defs><path class="a" d="M18.4 9.65l10.2 10.2-6.32 6.32c2.1 7 6.89 12.46 15.55 15.55l6.32-6.32 10.2 10.2-8.75 8.75C25.71 50.3 13.83 38.21 9.65 18.4z"/></svg>
                                {% when 'ribbon' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-ribbon" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-width:2px}</style></defs><path class="a" d="M28.57 42.31l-8.36 13.07-2.6-7.17-7.61.65 8.35-13.07a17.05 17.05 0 0 0 8.12 5.94 17.3 17.3 0 0 0 1.74.5zM54 48.86l-7.61-.65-2.61 7.17-8.36-13.07.37-.08a16.4 16.4 0 0 0 1.73-.5 17 17 0 0 0 8.12-5.93z"/><path class="a" d="M49 25.64a16.79 16.79 0 0 1-3.14 9.85 3.55 3.55 0 0 1-.23.31 17 17 0 0 1-8.12 5.93 16.4 16.4 0 0 1-1.73.5l-.37.08a16.74 16.74 0 0 1-3.42.35 16.91 16.91 0 0 1-3.43-.35l-.36-.08a17.3 17.3 0 0 1-1.74-.5 17.05 17.05 0 0 1-8.12-5.94c-.07-.09-.15-.19-.22-.3A16.86 16.86 0 0 1 15 25.64a17 17 0 0 1 34 0z"/><path class="a" d="M36.09 27.78l.96 5.63L32 30.75l-5.05 2.66.96-5.63-4.09-3.98 5.65-.82L32 17.86l2.53 5.12 5.64.82-4.08 3.98z"/></svg>
                                {% when 'shield' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-shield" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-width:2px}</style></defs><path class="a" d="M21.18 31.69L28.54 39l15.91-15.88"/><path class="a" d="M53 12.54v15.24a31.41 31.41 0 0 1-3.7 14.95A25.46 25.46 0 0 1 32 56a25.46 25.46 0 0 1-17.3-13.27A31.41 31.41 0 0 1 11 27.78V12.54C24.88 13.67 32 8 32 8s7.12 5.67 21 4.54z"/></svg>
                                {% when 'tag' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-tag" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-width:2px}</style></defs><path class="a" d="M46.69 10.34l-10.55.07-25.8 25.8 17.45 17.45 25.8-25.8.07-10.55-6.97-6.97z"/><circle class="a" cx="43.95" cy="20.05" r="3.53"/><path class="a" d="M14.4 32.15L31.85 49.6"/></svg>
                                {% when 'truck' %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-truck" viewBox="0 0 64 64"><defs><style>.a{fill:none;stroke:#000;stroke-miterlimit:10;stroke-width:2px}</style></defs><path class="a" d="M16.5 43.22H6.88V16.5h33.14v26.72H23.94M45.42 43.22h-5.4V30.4h17.1v12.82h-4.23M57.12 30.4l-6.41-8.56H40.02"/><circle class="a" cx="20.24" cy="43.76" r="3.74"/><path class="a" d="M45.42 43.23a3.82 3.82 0 1 1 0 .37v-.37"/></svg>
                              {% endcase %}
                              <span>{{ block.settings.text }}</span>
                            </span>
                          </li>
                        </ul>
                      </div>
                    {%- endunless -%}
                  {%- when 'inventory_status' -%}
                    {%- render 'product-inventory', product: product, current_variant: current_variant, block: block -%}
                  {%- when 'share' -%}
                    <div class="product-block" {{ block.shopify_attributes }}>
                      {%- render 'social-sharing', share_title: product.title, share_permalink: product.url, share_image: product -%}
                    </div>
                  {%- when 'trust_badge' -%}
                    <div class="product-block" {{ block.shopify_attributes }}>
                      <div class="aos-animate" style="max-width: {{ block.settings.trust_image.width }}px; margin: 0 auto;">
                        <div class="image-wrap " style="height: 0; padding-bottom: {{ 100 | divided_by: block.settings.trust_image.aspect_ratio }}%;">
                          {%- assign img_url = block.settings.trust_image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                          <img class="lazyload"
                              data-src="{{ img_url }}"
                              data-widths="[360, 540, 700, 1024]"
                              data-aspectratio="{{ block.settings.trust_image.aspect_ratio }}"
                              data-sizes="auto"
                              alt="{{ block.settings.trust_image.alt }}">
                          <noscript>
                            <img class="lazyloaded" src="{{ block.settings.trust_image | img_url: '540x' }}" alt="{{ block.settings.trust_image.alt }}">
                          </noscript>
                        </div>
                      </div>
                    </div>
                  {%- when 'custom' -%}
                    <div class="product-block" {{ block.shopify_attributes }}>
                      {{ block.settings.code }}
                    </div>
                {%- endcase -%}
              {%- else -%}
                <div data-blocks-holder
                     data-url="{{ product.url | within: collection }}"
                     data-template="{{ product.template_suffix }}">
                  <div class="placeholder-content" style="min-height: 86px;"></div>
                </div>
              {%- endfor -%}
              
            <!-- Start Custom Buttons -->
            <div class="mobile-contactus-buttons">
              <div class="heading">
                <p>Contact us</p>
              </div>
              {% for block in blocks %}
                {% case block.type %}
                  {% when 'custom_button' %}
                   {% style %}
                    .btn-{{block.id}}-custom{
                      width:{%- if block.settings.button_full -%} 100%; {% else %} 48%;{%- endif -%}
                    }
                    {%- if block.settings.button_full -%}
                        @media only screen and (max-width: 768px){
                        .btn-{{block.id}}-custom .custom-email-icon{
                            float: right;
                          }
                          .custom-email-icon {
                          width: 15px;
                            }
                          }
                        }
                     
                    {%- else -%}
                      @media only screen and (min-width: 426px){
                        .btn-{{block.id}}-custom .custom-email-icon{
                            float: right;
                        }
                      }
                        @media only screen and (max-width: 425px){
                        .btn-{{block.id}}-custom .custom-email-icon{
                           float: right;
                        }
                      }
                     @media only screen and (min-width: 376px){
                        .custom-email-icon {
                            width: 15px;
                        }
                      }
                      @media only screen and (max-width: 425px){
                        .custom-email-icon {
                            width: 11px;
                        }
                      }
                      
                      @media only screen and (max-width: 425px){
                        .btn-{{block.id}}-custom{
                          font-size: 8px;
                          padding: 13px 10px !important;
                        }
                      }
                    {%- endif -%}
                  {% endstyle %}
                  <a class="btn btn--full add-to-cart btn-custom-signup btn--secondary btn-{{ block.id }}-custom" href="{{ block.settings.button_url }}"> {{ block.settings.button_label }} 
                    {% if block.settings.button_icon == 'mail-icon' %}
                    <svg class="custom-email-icon"data-name="1-Email" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M29 4H3a3 3 0 0 0-3 3v18a3 3 0 0 0 3 3h26a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-.72 2L16 14.77 3.72 6zM30 25a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7.23l13.42 9.58a1 1 0 0 0 1.16 0L30 7.23z"/></svg>
                    {% elsif block.settings.button_icon == 'tel-icon'%}
                      <svg class="custom-email-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28.314 28.323" style="enable-background:new 0 0 28.314 28.323" xml:space="preserve"><path d="m27.728 20.384-4.242-4.242a1.982 1.982 0 0 0-1.413-.586h-.002c-.534 0-1.036.209-1.413.586L17.83 18.97l-8.485-8.485 2.828-2.828c.78-.78.78-2.05-.001-2.83L7.929.585A1.986 1.986 0 0 0 6.516 0h-.001C5.98 0 5.478.209 5.101.587L.858 4.83C.729 4.958-.389 6.168.142 8.827c.626 3.129 3.246 7.019 7.787 11.56 6.499 6.499 10.598 7.937 12.953 7.937 1.63 0 2.426-.689 2.604-.867l4.242-4.242c.378-.378.587-.881.586-1.416 0-.534-.208-1.037-.586-1.415zm-5.656 5.658c-.028.028-3.409 2.249-12.729-7.07C-.178 9.452 2.276 6.243 2.272 6.244L6.515 2l4.243 4.244-3.535 3.535a.999.999 0 0 0 0 1.414l9.899 9.899a.999.999 0 0 0 1.414 0l3.535-3.536 4.243 4.244-4.242 4.242z"/></svg>
                    {% else %}
                    {% endif %}
                  </a>
                  {% endcase %}
              {% endfor %}
            </div>
            <!-- End Custom Buttons  -->
        </div>

            {%- unless product.empty? -%}
              <textarea class="hide" aria-hidden="true" aria-label="Product JSON" data-variant-json>
                {{ product.variants | json }}
              </textarea>
              {%- if product.options.size > 1 -%}
                <textarea class="hide" aria-hidden="true" aria-label="Variant JSON" data-current-variant-json>
                  {{ current_variant | json }}
                </textarea>
              {%- endif -%}
            {%- endunless -%}
          </div>
        </div>

        {%- unless image_position == 'left' -%}
          <div class="grid__item {{ product_image_width }} product-single__sticky">
            {%- render 'product-images',
              section_id: section_id,
              product: product,
              isModal: isModal,
              image_position: image_position,
              product_zoom_enable: product_zoom_enable,
              product_zoom_size: product_zoom_size,
              product_image_size: product_image_size,
              thumbnail_arrows: thumbnail_arrows,
              thumbnail_position: thumbnail_position,
              video_looping: video_looping,
              video_style: video_style
            -%}
          </div>
        {%- endunless -%}
      </div>
        
    </div>
    <div class="tab-container">
      <ul class="tabs">
        {% assign start_index = 1 %}
        {% for header in section.blocks %}
          {% case header.type %}
            {% when 'tab' %}
              <li class="tab {% if start_index == 1 %}active-tab{% endif %}" data-tab="tab{{ start_index }}">
                {{ header.settings.title }}
              </li>
              {% assign start_index = start_index | plus: 1 %}
            {% when 'contact' %}
            <li class="tab {% if start_index == 1 %}active-tab{% endif %}" data-tab="tab{{ start_index }}">
                {{ header.settings.title }}
              </li>
          {% endcase %}
        {% endfor %}
      </ul>

      <ul class="tab-content">
        {% assign activeIndex = 1 %}
        {% for tabs in section.blocks %}
          {% case tabs.type %}
            {% when 'tab' %}
              {% capture tab_content %}
                {{ product.description }}
                {{ tabs.settings.content }}
                {{ tabs.settings.content_right }}
                {{ tabs.settings.page.content }}
              {% endcapture %}
              {% unless tab_content == blank and block.settings.title == blank %}
                
                <li id="tab{{ activeIndex }}" class="tab-item {% if activeIndex == 1 %}show{% endif %}">
                  {% assign item_info = tabs.settings.title | handleize %}

                  {%- unless item_info == 'item-info' -%}
                    <div class="tab-content__custom">
                      <!-- Content for the tab -->
                      <div class="tab-content__left rte {{ tabs.id }}" {{ tabs.shopify_attributes }}>
                       {{ tabs.settings.content }}
                      </div>
                      <div class="tab-content__right rte {{ tabs.id }}" {{ tabs.shopify_attributes }}>
                        {{ tabs.settings.content_right }}
                      </div>
                    </div>
                  {%- else -%}
                    <div class="grid tab-content__grid">
                      <div class="grid__item medium-up--three-fifths">
                        <div>
                          <div class="product-block product-block--header">
                            {% comment %}
                            {%- if settings.show_breadcrumbs and isModal != true -%}
                              {%- render 'breadcrumbs' -%}
                            {%- endif -%}
                            {% endcomment %}
              
                            {%- if settings.vendor_enable -%}
                              <div class="product-single__vendor" data-url="{{ vendor_url }}">
                                {%- render 'vendor', product: product, gender: gender -%}
                              </div>
                            {%- endif -%}
              
                            {%- if isModal -%}
                              <p class="grid-product__title grid-product__title--heading hc-font">
                                {{ product.title }}
                              </p>
                            {%- else -%}
                              <h1 class="grid-product__title grid-product__title--heading hc-font">
                                {%- unless product.empty? -%}
                                  {{ product.title }}
                                {%- else -%}
                                  {{ 'home_page.onboarding.product_title' | t }}
                                {%- endunless -%}
                              </h1>
                            {%- endif -%}
              
                            {%- if sku_enable -%}
                              <p data-sku class="product-single__sku">
                                {%- if current_variant.sku -%}
                                  {{ current_variant.sku }}
                                {%- endif -%}
                              </p>
                            {%- endif -%}
                          </div>
                          {{ product.description }}
                        </div>
                      </div>
                      <div class="grid__item medium-up--two-fifths">
                        <div class="product__featured-image--wrapper">
                          <div class="info-tab__featured-image">
                            {% assign image = product.images[1] %}
                            {% if image == blank %}
                              {% assign image = product.images[0] %}
                            {% endif %}
                            {%- render 'image-component', image: image -%}
                          </div>
                        </div>
                      </div>
                      
                    </div>
                  {%- endunless -%}
                </li>
                {% assign activeIndex = activeIndex | plus: 1 %}
              {% endunless %}
            {% when 'contact' %}
              <li id="tab{{ activeIndex }}" class="tab-item {% if activeIndex == 1 %}show{% endif %}">
                <div class="tab-content__custom">
                  <div class="custom-block">
                    {{ tabs.settings.custom_block_details }}
                  </div>
                   {%- form 'contact', id: contact_form_id -%}
                <div class="collapsible-content__inner rte">
                  <div class="form-vertical">
                    <input type="hidden" name="contact[product]" value="Product question for: {{ shop.secure_url }}{{ product.url }}">
          
                    <div class="grid grid--small">
                      <div class="grid__item medium-up--one-half">
                        <label for="ContactFormName-{{ id }}">{{ 'contact.form.name' | t }}</label>
                        <input type="text" id="ContactFormName-{{ id }}" class="input-full" name="contact[name]" autocapitalize="words" value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}">
                      </div>
          
                      <div class="grid__item medium-up--one-half">
                        <label for="ContactFormEmail-{{ id }}">{{ 'contact.form.email' | t }}</label>
                        <input type="email" id="ContactFormEmail-{{ id }}" class="input-full" name="contact[email]" autocorrect="off" autocapitalize="off" value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}">
                      </div>
                    </div>
          
                    {%- if tabs.settings.phone -%}
                      <label for="ContactFormPhone-{{ id }}">{{ 'contact.form.phone' | t }}</label>
                      <input type="tel" id="ContactFormPhone-{{ id }}" class="input-full" name="contact[phone]" pattern="[0-9\-]*" value="{% if form.phone %}{{ form.phone }}{% elsif customer %}{{ customer.phone }}{% endif %}">
                    {%- endif -%}
          
                    <label for="ContactFormMessage-{{ id }}">{{ 'contact.form.message' | t }}</label>
                    <textarea rows="5" id="ContactFormMessage-{{ id }}" class="input-full" name="contact[body]">{% if form.body %}{{ form.body }}{% endif %}</textarea>
          
                    <label for="tab-contact-submit-{{ id }}" class="hidden-label">{{ 'contact.form.send' | t }}</label>
                    <button type="submit" id="tab-contact-submit-{{ id }}" class="btn">
                      {{ 'contact.form.send' | t }}
                    </button>
          
                    {% comment %}
                      Remove the following three lines of code to remove the note
                      about being protected by Google's reCAPTCHA service.
                      By removing it, the small reCAPTCHA widget will appear in the
                      bottom right corner of the page.
                    {% endcomment %}
                    {{ 'shopify.online_store.spam_detection.disclaimer_html' | t }}
                  </div>
                </div>
                {%- if form.posted_successfully? -%}
                  <p class="note note--success">
                    {{ 'contact.form.post_success' | t }}
                  </p>
                {%- endif -%}
            
                {%- if form.product -%}
                  {{ form.errors | default_errors }}
                {%- endif -%}
                {%- endform -%}
              </div>
            </li>
          {% endcase %}
        {% endfor %}
      </ul>
    </div>

    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function() {
        var contentItems = document.querySelectorAll('.tab-item');
        var tabItems = document.querySelectorAll('.tab');
    
        function showTab(tabIndex) {
          tabItems.forEach(function(tab) {
            tab.classList.remove('active-tab');
          });
    
          contentItems.forEach(function(content) {
            content.classList.remove('show');
          });
    
          tabItems[tabIndex].classList.add('active-tab');
          contentItems[tabIndex].classList.add('show');
        }
    
        document.querySelector('.tabs').addEventListener('click', function(event) {
          var currentTab = event.target.closest('.tab');
          if (!currentTab) return;
    
          var index = Array.from(tabItems).indexOf(currentTab);
          showTab(index);
        });
    
        // Show the first tab on page load
        showTab(0);
      });
    </script>
  </div>
</div>